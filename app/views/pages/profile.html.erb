  <div class="container flex-column d-block h-100">
    <div class="welcome mb-3 mt-3">
      <% if user_signed_in? %>
        <% if current_user.first_name.present? %>
          <h3><%= "WELCOME BACK #{current_user.first_name.upcase} #{current_user.last_name.upcase} !" %></h3>
        <% else %>
          <h3><%= "WELCOME BACK #{current_user.first_name} #{current_user.last_name} !" %></h3>
        <% end %>
      <% end %>
    </div>
    <div class="body-container d-flex p-0">
      <div class="info-container align-items-start m-0 m-md-2">
        <div class="avatar-info">
          <%= user_image(current_user) %>
        </div>
        <div class="update-info-links border-top pt-3">
          <p><%= link_to "UPDATE PASSWORD", edit_user_registration_path, class: "text-secondary" %> </p>
          <a href="#" class="text-secondary" data-toggle="modal" data-target="#exampleModalLong">UPDATE PERSONAL INFO</a>
        </div>
      </div>
      <div class="saved-container flex-wrap border border-dark w-100 p-5 m-0 mt-2 m-md-2">
        <% if current_user.favorites.empty? %>
          <p>You have no favourites yet</p>
        <% else %>

        <!-- Favorites Cards -->

          <% current_user.favorites.each do |favorite| %>
            <%= link_to producer_path(favorite.producer.id) do %>
              <div class="producer-card mb-2">
                <div id="carouselExampleControls<%= favorite.producer.id %>" class="carousel slide" data-interval="false">
                  <div class="carousel-inner">
                    <div class="carousel-item active">
                      <img class="d-block w-100" src="https://images.unsplash.com/photo-1507598641400-ec3536ba81bc?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1050&q=80" alt="First slide">
                    </div>
                    <div class="carousel-item">
                      <img class="d-block w-100" src="https://images.unsplash.com/photo-1507844090982-e6e9452ea68d?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=1047&q=80" alt="Second slide">
                    </div>
                    <div class="carousel-item">
                      <img class="d-block w-100" src="https://images.unsplash.com/photo-1504279577054-acfeccf8fc52?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=crop&w=967&q=80" alt="Third slide">
                    </div>
                  </div>
                  <a class="carousel-control-prev" href="#carouselExampleControls<%= favorite.producer.id %>" role="button" data-slide="prev">
                    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                    <span class="sr-only">Previous</span>
                  </a>
                  <a class="carousel-control-next" href="#carouselExampleControls<%= favorite.producer.id %>" role="button" data-slide="next">
                    <span class="carousel-control-next-icon" aria-hidden="true"></span>
                    <span class="sr-only">Next</span>
                  </a>
                </div>
                <div class="card-infos d-flex justify-content-between">
                  <div class="info flex-column">
                    <div class="specific-info-name"><h4><%= link_to favorite.producer.name.upcase, producer_path(favorite.producer.id) %></h4></div>
                    <% favorite.producer.products.each do |product| %>
                       <div class="specific info"><p><%= product.name %></p></div>
                       <% product.tags.each do |tag| %>
                       <div class="specific info"><p><%= tag.name %></p></div>
                       <% end %>
                    <% end %>
                  </div>
                  <div id="favorite-star-<%= favorite.producer.id %>">
                    <%= render "producers/favorite_star", producer: favorite.producer %>
                  </div>
                </div>
              </div>
            <% end %>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>


<!-- MODAL -->

<div class="modal fade mt-5" id="exampleModalLong" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">PERSONAL INFORMATION</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>

      <%= simple_form_for current_user do |f| %>
        <div class="modal-body">
          <%= f.input :first_name %>
          <%= f.input :last_name %>
          <%= f.input :phone_number %>
          <%= f.input :address %>
          <%= f.input :photo, as: :file %>
        </div>

        <div class="modal-footer">
          <button type="button" class="btn-main m-0" data-dismiss="modal">CLOSE</button>
          <%= f.button :submit, 'SAVE CHANGES', class: "btn-green" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
